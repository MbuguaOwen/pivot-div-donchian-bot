run:
  mode: live         # paper | live
  timeframe: "15m"
  heartbeat_seconds: 30

exchange:
  market_type: futures # futures | spot
  testnet: false
  recv_window_ms: 5000

universe:
  dynamic: false
  quote_asset: "USDT"
  pair_overrides_dir: "configs/pairs"
  max_symbols: 20       # cap dynamic selection to avoid runaway subscriptions
  allow_bases: []   # ignored when dynamic=false
  symbols:
    - XRPUSDT
    - ADAUSDT
    - DOGEUSDT
    - TRXUSDT
    - LINKUSDT
    - DOTUSDT
    - AVAXUSDT
    - LTCUSDT
    - ATOMUSDT
    - NEARUSDT
    - UNIUSDT
    - BCHUSDT
    - BTCUSDT
    - ETHUSDT
    - SOLUSDT
    - BNBUSDT
    - XLMUSDT
    - OPUSDT
    - ARBUSDT
    - APTUSDT

strategy:
  direction: "both"   # both | long_only | short_only
  donchian:
    length: 120
    extreme_band_pct: 0.10
  pivot:
    length: 5
  oscillator:
    ema_length: 14
  divergence:
    # pine (default): EMA((close-open)*volume, oscLen)
    # cvd: bar-close CVD (from aggTrades)
    # both: require pine AND cvd divergence to agree
    # either: pine OR cvd divergence
    mode: "pine"
  fire_on_close_only: true

parity:
  mode: true
  ema_seed_mode: "sma"   # "first" (default) | "sma" (Pine-style seed)
  pivot_tie_break: "tv_like" # tie-break when equal highs/lows inside window
  warmup_bars: 0
  gap_heal: true
  desync_pause: true

risk:
  atr:
    enabled: false
    length: 14
    sl_mult: 2.0
    tp_mult: 3.0

orders:
  # Position sizing: simplest is fixed notional in USDT (converted to quantity).
  notional_usdt: 25.0
  # For futures you can also set leverage (bot will try to set it)
  leverage: 3
  # Market orders are simplest/most robust
  order_type: MARKET

position:
  one_position_per_symbol: true
  allow_flip: false        # if true, closes and reverses on opposite signal

limits:
  max_positions_total: 20
  cooldown_minutes_per_symbol: 30

telegram:
  enabled: true
  parse_mode: "HTML"
  branding: "Pivot Div + Donchian"
  heartbeat_enabled: true
  # Optional: override heartbeat interval (seconds) for Telegram status pings.
  # Defaults to run.heartbeat_seconds if unset.
  heartbeat_seconds: 14400
  controls_enabled: false
  # If unset, will use TELEGRAM_CHAT_ID from env
  controls_allowed_chat_id: null
  controls_state_path: "state/telegram_controls.json"

storage:
  out_dir: "artifacts"

logging:
  level: "${LOG_LEVEL:INFO}"
